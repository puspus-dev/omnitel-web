<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>OmniTel Dashboard</title>
</head>
<body>
<h1>Dashboard</h1>
<p>Felhasználó: <span id="dash-phone"></span></p>
<p>Csomag: <span id="dash-package"></span></p>
<h2>Felhasználók</h2>
<ul id="user-list"></ul>
<h2>Üzenetek</h2>
<div id="messages"></div>
<input type="text" id="sms-input" placeholder="Írj üzenetet..."><button onclick="sendSMS()">Küldés</button>
<br>
<button id="call-btn">Hívás indítása</button>
<button onclick="endCall()">Hívás vége</button>
<button onclick="logout()">Kijelentkezés</button>
<script src="assets/js/virtual_operator_dashboard_full.js"></script>
<script>
let currentUser = localStorage.getItem('currentUser');
if(!currentUser){ window.location.href='myomnitel.html'; }


let users = JSON.parse(localStorage.getItem('users')||'{}');
let userPackage = localStorage.getItem('userPackage')||'OmniTel Free';


const dashPhoneEl = document.getElementById('dash-phone');
const dashPackageEl = document.getElementById('dash-package');
const userListEl = document.getElementById('user-list');
dashPhoneEl.textContent = currentUser;
dashPackageEl.textContent = userPackage;


let selectedUser = null;
for(const u in users){
if(u!==currentUser){
const li = document.createElement('li');
li.textContent = u;
li.onclick = ()=> { selectedUser = u; alert('Kiválasztottad híváshoz: '+u); };
userListEl.appendChild(li);
}
}


document.getElementById('call-btn').onclick = () => {
if(!selectedUser){ alert('Előbb válassz egy felhasználót a listából!'); return; }
startCall();
};
</script>
</body>
</html>